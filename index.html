<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Test Add Employees</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 bg-gray-50">

  <h1 class="text-2xl mb-4">Add Employee</h1>
  <form id="add-employee-form" class="space-y-4 max-w-sm">
    <input id="newEmployeeName" type="text" placeholder="Employee Name" required
      class="w-full p-2 border border-gray-300 rounded" />
    <input id="newEmployeeWage" type="number" step="0.01" min="0" placeholder="Hourly Wage ($)" required
      class="w-full p-2 border border-gray-300 rounded" />
    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Add Employee</button>
  </form>

  <h2 class="text-xl mt-6 mb-2">Employees</h2>
  <select id="employeeSelect" class="w-full max-w-sm p-2 border border-gray-300 rounded">
    <option value="">Select Employee</option>
  </select>

  <script>
    function loadEmployees() {
      return JSON.parse(localStorage.getItem("employees") || "[]");
    }

    function saveEmployees(employees) {
      localStorage.setItem("employees", JSON.stringify(employees));
    }

    function populateEmployeeDropdown() {
      const employees = loadEmployees();
      const select = document.getElementById("employeeSelect");
      select.innerHTML = '<option value="">Select Employee</option>';
      employees.forEach((emp, idx) => {
        const option = document.createElement("option");
        option.value = idx;
        option.textContent = emp.name + " ($" + emp.wage.toFixed(2) + ")";
        select.appendChild(option);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      populateEmployeeDropdown();

      document.getElementById("add-employee-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("newEmployeeName").value.trim();
        const wage = parseFloat(document.getElementById("newEmployeeWage").value);
        if (!name) {
          alert("Please enter a name.");
          return;
        }
        if (isNaN(wage) || wage <= 0) {
          alert("Please enter a valid hourly wage.");
          return;
        }
        const employees = loadEmployees();
        employees.push({ name, wage, ytdGross: 0, ytdCpp: 0, ytdEi: 0 });
        saveEmployees(employees);
        populateEmployeeDropdown();
        e.target.reset();
      });
    });
  </script>

</body>
</html>
